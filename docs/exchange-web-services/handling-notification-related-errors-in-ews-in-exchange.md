---
title: Gestion des erreurs liées à la notification dans EWS dans Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.localizationpriority: medium
ms.assetid: 519e1e52-5f1f-4f06-931e-8c20a586a563
description: Découvrez comment gérer les erreurs liées aux notifications dans les applications que vous développez à l’aide de l’API mana gérée EWS ou EWS dans Exchange.
ms.openlocfilehash: 7b49a57b7236318e08cb70ac2ac00edc4cf86363
ms.sourcegitcommit: 54f6cd5a704b36b76d110ee53a6d6c1c3e15f5a9
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 09/24/2021
ms.locfileid: "59520212"
---
# <a name="handling-notification-related-errors-in-ews-in-exchange"></a>Gestion des erreurs liées à la notification dans EWS dans Exchange

Découvrez comment gérer les erreurs liées aux notifications dans les applications que vous développez à l’aide de l’API mana gérée EWS ou EWS dans Exchange.

Si votre application s’abonne et reçoit des notifications, vous de devez peut-être gérer les erreurs liées aux notifications. Vous pouvez gérer ces erreurs en cours d'exécution, ou lorsque vous développez votre application EWS.

**Tableau 1. Erreurs liées aux notifications et comment les gérer**

|Erreur|Se produit lorsque vous essayez de...|Traiter par...|
|:-----|:-----|:-----|
|**ErrorExceededConnectionCount** |Ouvrez une connexion pour obtenir des événements lorsque le compte a atteint sa limite de connexions de connexions de diffusion en continu ouvertes. | <ul><li>Utilisation [de l’emprunt d’identité](https://technet.microsoft.com/library/dd776119%28v=exchg.150%29.aspx) [pour ouvrir des connexions.](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling)</li><li>Utilisation de moins de connexions pour obtenir des événements. Optimisez le nombre d’abonnements dans chaque connexion en utilisant [l’affinité](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md) et en plaçant un maximum de [200 ID](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_howdoimaintain)d’abonnement dans le même groupe. Vous pouvez ensuite utiliser la même connexion pour récupérer des événements pour l’ensemble du groupe, ce qui réduit le nombre de connexions requises.</li><li>  Modification de la valeur de HangingConnectionLimit dans le fichier web.config pour Exchange local pour remplacer la valeur par défaut de trois connexions ouvertes. Exchange Online a une valeur hangingConnectionLimit par défaut de 10, qui n’est pas configurable.</li></ul> |
|**ErrorExceededSubscriptionCount** |Créez trop d’abonnements. Le paramètre de stratégie de limitation [EwsMaxSubscriptions](https://msdn.microsoft.com/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxsubscriptions%28v=exchg.150%29.aspx) détermine le nombre maximal d’abonnements qu’un compte peut créer. | <ul><li>Utilisation [de l’emprunt d’identité](https://technet.microsoft.com/library/dd776119%28v=exchg.150%29.aspx) [pour créer des abonnements.](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling)</li><li>Réduction du nombre d’abonnements.</li></ul> |
|**ErrorInvalidSubscriptionRequest** |Créez des abonnements pour plusieurs boîtes aux lettres ou dossiers à partir d’une seule demande.  |Création d’un abonnement pour un dossier public unique ou une seule boîte aux lettres dans une seule demande.|
|**ErrorInvalidMark** |Obtenir des événements à l’aide d’un filigrane non valide.| <ul><li>Vérification de l’ID d’abonnement renvoyé dans une réponse précédente.</li><li>S’assurer que vous envoyez l’ID d’abonnement pour **l’objet ExchangeService** correct.</li><li>[Création d’un abonnement.](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover)</li></ul> |
|**ErrorMissedNotificationEvents** |Obtenir des événements lorsque certains événements précédents ont été manqués.   |Comparaison des propriétés de dossier étendu **PR_LOCAL_COMMIT_TIME_MAX** (0x670a) et **PR_DELETED_COUNT_TOTAL** (0x670b) pour déterminer les modifications qui ont été manquées et création d’un [abonnement.](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover)  |
|**ErrorProxyRequestNotAllowed** |S’abonner aux événements d’un utilisateur dans une demande par lots dont la boîte aux lettres a été déplacée vers un autre site.   |Utilisation [de la découverte automatique pour](autodiscover-for-exchange.md) découvrir externalewsUrl ou EwsPartnerUrl et création d’un abonnement.  |
|**ErrorReadEventsFailed** |Obtenir des événements d’un abonnement qui ne sont pas trouvés.  |Utilisation [de la découverte automatique pour](autodiscover-for-exchange.md) découvrir externalewsUrl ou EwsPartnerUrl et création d’un abonnement.  |
|**ErrorServerBusy** | Dépassez [les limites](ews-throttling-in-exchange.md#throttling-considerations-for-ews-notification-applications) de limitation. Ez compte des informations suivantes concernant la limitation :<ul><li>La limite de limitation [EwsMaxSubscriptions](https://msdn.microsoft.com/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxsubscriptions%28v=exchg.150%29.aspx) identifie le nombre maximal d’abonnements aux notifications push, pull ou streaming qui peuvent être actifs en même temps. Il s’agit de la valeur des abonnements aux boîtes aux lettres, et non du nombre d’abonnements à des dossiers individuels dans un abonnement de boîte aux lettres. À partir des versions de boîte aux lettres de service 14.16.0135 et 14.15.0057.000, une boîte aux lettres hébergée par Exchange Online ou Exchange Online dans le cadre de Office 365 peut avoir jusqu’à 20 abonnements et une boîte aux lettres Exchange 2013 sur site cible peut avoir jusqu’à 5 000 abonnements.</li><li>La limite de limitation [EwsMaxConcurrency](https://msdn.microsoft.com/library/microsoft.exchange.data.directory.systemconfiguration.throttlingpolicy.ewsmaxconcurrency%28v=exchg.150%29.aspx) identifie le nombre maximal de demandes actives pour les connexions sans diffusion en continu et a une valeur par défaut de 27.</li><li>La limite par défaut pour les connexions de diffusion en continu ouvertes est dix.</li></ul> |<ul><li>[Prendre en compte](ews-throttling-in-exchange.md#throttling-considerations-for-ews-notification-applications) les implications des stratégies de limitation liées aux notifications et limiter le nombre d’abonnements actifs et de connexions actives afin que l’application ne soit pas limitée.</li><li>Utilisation de moins de connexions pour obtenir des événements. Optimisez le nombre d’abonnements dans chaque connexion en plaçant un maximum de [200 ID](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md)d’abonnement dans le même groupe. Vous pouvez ensuite utiliser la même connexion pour récupérer des événements pour l’ensemble du groupe, ce qui réduit le nombre de connexions requises.</li><li>Modification de la valeur de HangingConnectionLimit dans le fichier web.config pour remplacer la valeur par défaut de dix connexions de diffusion en continu ouvertes.</li></ul>|
|**ErrorSubscriptionNotFound** |Obtenir les événements d’un abonnement qui ne sont pas trouvés. L’abonnement a peut-être expiré, le processus EWS a peut-être été redémarré ou un abonnement non valide a été transmis. | <ul><li>Vérification de l’utilisation du même ID d’abonnement que celui renvoyé dans une réponse précédente.</li><li>S’assurer que vous envoyez l’ID d’abonnement pour **l’objet ExchangeService** correct.</li><li> [Création d’un abonnement.](handling-notification-related-errors-in-ews-in-exchange.md#bk_recover)</li></ul> |
|**[ServiceLocalException](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.serviceresponseexception%28v=exchg.80%29.aspx)** |Ajoutez un abonnement à un nouveau dossier pendant qu’une connexion d’abonnement est ouverte sur un autre dossier.  |Modification de votre abonnement pour vous abonner à tous les dossiers de la boîte aux lettres, plutôt qu’à un dossier spécifique.  |
|**[ServiceResponseException](https://msdn.microsoft.com/library/microsoft.exchange.webservices.data.serviceresponseexception%28v=exchg.80%29.aspx)** |Obtenez des événements pour un abonnement qui ne peuvent pas se trouver dans le magasin Exchange de données.  | <ul><li>Vérification de l’utilisation du même ID d’abonnement que celui renvoyé dans une réponse précédente.</li><li>S’assurer que vous envoyez l’ID d’abonnement pour **l’objet ExchangeService** correct.</li></ul> |

## <a name="recovering-from-lost-subscriptions"></a>Récupération d’abonnements perdus
<a name="bk_recover"> </a>

Lorsqu’un abonnement est perdu ou n’est plus accessible, il est préférable de créer un abonnement sans inclure l’ancien filigrane dans le nouvel abonnement. L’abonnement à l’ancien filigrane entraîne une analyse linéaire des événements, ce qui est coûteux. Au lieu de cela, créez un nouvel abonnement et comparez les propriétés du dossier pour rechercher les modifications de contenu qui se sont produites entre l’abonnement perdu et le nouvel abonnement. Les propriétés de dossier étendu que nous vous recommandons de vérifier sont **PR_LOCAL_COMMIT_TIME_MAX** (0x670a0040) et PR_DELETED_COUNT_TOTAL **(0x670b0003).** Vous pouvez le faire en [créant une définition de propriété étendue.](properties-and-extended-properties-in-ews-in-exchange.md)

## <a name="see-also"></a>Voir aussi

- [Abonnements à des notifications, événements de boîte aux lettres et EWS dans Exchange](notification-subscriptions-mailbox-events-and-ews-in-exchange.md)
- [Notifications de flux concernant les événements de boîte aux lettres à l'aide de EWS dans Exchange](how-to-stream-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
- [Notifications de type pull concernant les événements de boîte aux lettres à l'aide de EWS dans Exchange](how-to-pull-notifications-about-mailbox-events-by-using-ews-in-exchange.md)
- [Conserver l’affinité entre un groupe d'abonnements et le serveur de boîtes aux lettres dans Exchange](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md)


